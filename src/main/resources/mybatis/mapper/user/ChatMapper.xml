<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE 
	mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.vvs.platform.dao.user.UserChatDAO">

<!-- 의안 등록시 채팅방 자동 생성 -->
	<insert id="insertChatRoom" parameterType="com.vvs.platform.dto.user.ChatRoomDTO">
		<selectKey keyProperty="chatRoomId" resultType="long" order="BEFORE">
	        SELECT SEQ_CHAT_ROOM_ID.NEXTVAL FROM DUAL
	    </selectKey>
	    
	    INSERT INTO chat_room (
	        chat_room_id,
	        bill_board_id,
	        title,
	        start_date,
	        end_date,
	        status
	    ) VALUES (
	        #{chatRoomId},
	        #{billBoardId},
	        #{title},
	        #{startDate},
	        #{endDate},
	        #{status}
	    )
	</insert>
	
<!-- 채팅방 전체 목록 select -->	
   <select id="selectAllChatRooms" resultType="com.vvs.platform.dto.user.ChatRoomDTO">
	   SELECT 
	        chat_room_id AS chatRoomId,
	        bill_board_id AS billBoardId,
	        title,
	        start_date AS startDate,
	        end_date AS endDate,
	        status
	    FROM chat_room
	    ORDER BY chat_room_id DESC
   </select>
	
	
</mapper>